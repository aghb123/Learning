<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>i5ting_ztree_toc:git学习</title>
    <link href="toc/style/github-bf51422f4bb36427d391e4b75a1daa083c2d840e.css" media="all" rel="stylesheet" type="text/css" />
    <link href="toc/style/github2-d731afd4f624c99a4b19ad69f3083cd6d02b81d5.css" media="all" rel="stylesheet" type="text/css" />
    <link href="toc/css/zTreeStyle/zTreeStyle.css" media="all" rel="stylesheet" type="text/css" />
    <style>
        pre {
            counter-reset: line-numbering;
            border: solid 1px #d9d9d9;
            border-radius: 0;
            background: #fff;
            padding: 0;
            line-height: 23px;
            margin-bottom: 30px;
            white-space: pre;
            overflow-x: auto;
            word-break: inherit;
            word-wrap: inherit;
        }
        
        pre a::before {
            content: counter(line-numbering);
            counter-increment: line-numbering;
            padding-right: 1em;
            /* space after numbers */
            width: 25px;
            text-align: right;
            opacity: 0.7;
            display: inline-block;
            color: #aaa;
            background: #eee;
            margin-right: 16px;
            padding: 2px 10px;
            font-size: 13px;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        pre a:first-of-type::before {
            padding-top: 10px;
        }
        
        pre a:last-of-type::before {
            padding-bottom: 10px;
        }
        
        pre a:only-of-type::before {
            padding: 10px;
        }
        
        .highlight {
            background-color: #ffffcc
        }
        /* RIGHT */
    </style>
</head>

<body>
    <div>
        <div style='width:25%;'>
            <ul id="tree" class="ztree" style='width:100%'>

            </ul>
        </div>
        <div id='readme' style='width:70%;margin-left:20%;'>
            <article class='markdown-body'>
                <h3 id="-git-">初次使用Git前的配置</h3>
<pre class="prettyprint linenums:0"><code>git config --global user.name &quot;username&quot;
git config --global user.email &quot;email&quot;

C:\Users\WZ&gt;git config --list
diff.astextplain.textconv=astextplain
filter.lfs.clean=git-lfs clean -- %f
filter.lfs.smudge=git-lfs smudge -- %f
filter.lfs.process=git-lfs filter-process
filter.lfs.required=true
http.sslbackend=openssl
http.sslcainfo=D:/Git/mingw64/ssl/certs/ca-bundle.crt
core.autocrlf=true
core.fscache=true
core.symlinks=false
pull.rebase=false
credential.helper=manager-core
credential.https://dev.azure.com.usehttppath=true
init.defaultbranch=master
filter.lfs.process=git-lfs filter-process
filter.lfs.required=true
filter.lfs.clean=git-lfs clean -- %f
filter.lfs.smudge=git-lfs smudge -- %f
user.name=aghb123
user.email=wangzhuang137@gmail.com //注册成功
</code></pre><p>###工作区域、暂存区域和Git仓库</p>
<p><img src="git学习.assets/image-20210120155215254.png" style="zoom:50%;" /></p>
<h3 id="git-">Git的工作流程</h3>
<ul>
<li>Git的工作流程一般是：<ol>
<li>在工作目录中添加、修改文件</li>
<li>将需要进行版本管理的文件放入暂存区域</li>
<li>将暂存区域的文件提交到Git仓库</li>
</ol>
</li>
<li>Git管理的文件有三种状态：<ol>
<li>已修改（modified）</li>
<li>已暂存（staged）</li>
<li>已提交（committed）</li>
</ol>
</li>
</ul>
<h3 id="-">练习</h3>
<ol>
<li>创建仓库</li>
</ol>
<pre class="prettyprint linenums:0"><code>G:\github\Git_test&gt;git init
Initialized empty Git repository in G:/github/Git_test/.git/
</code></pre><ol start="2">
<li>添加文件</li>
</ol>
<pre><code class="lang-markdown">G:\github\Git_test&gt;git add README.md //将文件加入暂存区

G:\github\Git_test&gt;git commit -m &quot;add a readme file&quot; //将文件提交到仓库，附加说明
[master (root-commit) 3e76ed6] add a readme file
 1 file changed, 1 insertion(+)
 create mode 100644 README.md
</code></pre>
<ol start="3">
<li>查看状态</li>
</ol>
<p><code>git status</code></p>
<pre><code class="lang-markdown">G:\github\Git_test&gt;git status
On branch master
nothing to commit, working tree clean
//添加LICENSE文件
G:\github\Git_test&gt;git status
On branch master
Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
        LICENSE

nothing added to commit but untracked files present (use &quot;git add&quot; to track)

//撤销将LICENSE添加到暂存区
G:\github\Git_test&gt;git restore --staged LICENSE

G:\github\Git_test&gt;git status
On branch master
Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
        LICENSE

nothing added to commit but untracked files present (use &quot;git add&quot; to track)

//修改README.md
G:\github\Git_test&gt;git status
On branch master
Changes not staged for commit:
  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
  (use &quot;git restore &lt;file&gt;...&quot; to discard changes in working directory)
        modified:   README.md

no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)

G:\github\Git_test&gt;git restore README.md //撤销工作区的修改

//修改README.md之后，再加入到暂存区，然后再修改README.md
G:\github\Git_test&gt; git status
On branch master
Changes to be committed:
  (use &quot;git restore --staged &lt;file&gt;...&quot; to unstage)
        modified:   README.md

Changes not staged for commit:
  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
  (use &quot;git restore &lt;file&gt;...&quot; to discard changes in working directory)

G:\github\Git_test&gt;git status -s //简短模式查看状态
MM README.md

G:\github\Git_test&gt;git add README.md

G:\github\Git_test&gt;git status -s
M  README.md

//查看日志
G:\github\Git_test&gt;git log
commit 3b73f3432d9da32413cda486b553a1244a1473ae (HEAD -&gt; master)
Author: aghb123 &lt;wangzhuang137@gmail.com&gt;
Date:   Wed Jan 20 17:00:53 2021 +0800

    modified README.md

commit e4fd1f34e645f031a8c012fc370f099f1abaf78b
Author: aghb123 &lt;wangzhuang137@gmail.com&gt;
Date:   Wed Jan 20 16:28:11 2021 +0800

    add LICENSE

commit 3e76ed6b35181f2b31e8084477a7be30ccaefb9a
Author: aghb123 &lt;wangzhuang137@gmail.com&gt;
Date:   Wed Jan 20 16:04:14 2021 +0800

    add a readme file
</code></pre>
<h3 id="-">撤销操作</h3>
<p><img src="git学习.assets/image-20210120175802086.png" alt="image-20210120175802086" style="zoom:50%;" /></p>
<p><img src="git学习.assets/image-20210120180153712.png" alt="image-20210120180153712" style="zoom:70%;" /></p>
<h4 id="git-reset"><code>git reset</code></h4>
<p>reset 重新设置的意思，其实就是用来设置分支的头部指向，当进行了一系列的提交之后，忽然发现最近的几次提交有问题，想从提交记录中删除，这是就会用到 <code>git reset</code> 命令，这个命令后面跟 <code>commit id</code>，表示当前分支回退到这个 <code>commit id</code> 对应的状态，之后的日志记录被删除，工作区中的文件状态根据参数的不同会恢复到不同的状态。</p>
<ul>
<li><code>--soft</code>: 被回退的那些版本的修改会被放在暂存区，可以再次提交。</li>
<li><code>--mixed</code>: 默认选项，被回退的那些版本的修改会放在工作目录，可以先加到暂存区，然后再提交。</li>
<li><code>--hard</code>: 被回退的那些版本的修改会直接舍弃，好像它们没有来过一样。</li>
</ul>
<p>这样来看，<code>git reset</code> 命令好像是用来回退版本的，但是如果使用 <code>git reset HEAD file_name</code> 命令就可以将一个文件回退到 <code>HEAD</code> 指向版本所对应的状态，其实就是当前版本库中的状态，也就相当于还原了本地的修改。</p>
<p><code>reset</code>命令回滚快照过程</p>
<ol>
<li>移动HEAD的指向(--soft)</li>
<li>将快照回滚到暂存区域([--mixed],默认)</li>
<li>将暂存区域还原到工作目录(--hard)</li>
</ol>
<p><strong><code>reset</code>回滚指定快照*</strong></p>
<p><code>git reset 版本快照的ID号</code></p>
<p><strong><code>reset</code>回滚个别文件</strong></p>
<p><code>git reset 版本快照 文件名/路径</code></p>
<h3 id="-">版本对比</h3>
<ol>
<li>比较暂存区域与工作目录</li>
</ol>
<p><code>git diff</code></p>
<ol start="2">
<li>比较两个历史快照</li>
</ol>
<p><code>git diff 快照1ID 快照2ID</code></p>
<ol start="3">
<li>比较当前工作目录和Git仓库中的快照</li>
</ol>
<p><code>git diff 快照ID</code></p>
<ol start="4">
<li>比较暂存区域和Git仓库快照</li>
</ol>
<p><code>git diff --cached [快照ID]</code></p>
<p><img src="git学习.assets/image-20210120194423204.png" alt="image-20210120194423204" style="zoom:50%;" /></p>
<h3 id="-">修改最后一次提交</h3>
<ul>
<li><p>在实际开发中，可能遇到以下两种情景：</p>
<p>——情景一：版本刚一提交(commit)到仓库，突然想起漏掉两个文件还没有添加(add)</p>
<p>——情景二：版本刚一提交(commit)到仓库，突然想起版本说明写得不够全面，无法彰显本次修改的重大意义</p>
</li>
<li><p>执行带<code>--amend</code>选项的<code>commit</code>提交命令，Git就会更正最近的一次提交</p>
</li>
</ul>
<h3 id="-">删除文件</h3>
<p>不小心删除本地仓库里的文件，可以通过暂存区恢复</p>
<p><code>git checkout -- README.md</code></p>
<ul>
<li><p><code>git rm 文件名</code></p>
<p>——该命令删除的只是工作目录和暂存区域的文件，也就是取消跟踪，再下次提交时不纳入版本管理</p>
<p>——当工作目录和暂存区域的同一个文件存在不同内容时，执行<code>git rm -f 文件名</code>命令就可以把两个都删除</p>
<p>——如果只删除暂存区域的文件(保留工作目录的)，那么可以执行<code>git rm --cached 文件名</code>命令实现目的</p>
</li>
</ul>
<h3 id="-">重命名文件</h3>
<ul>
<li><p><code>git mv 旧文件名 新文件名</code></p>
<p>——ren/mv 旧文件名 新文件名</p>
<p>——git rm 旧文件名</p>
<p>——git add 新文件名</p>
</li>
</ul>
<h3 id="git-"><code>Git</code>分支</h3>
<p> <img src="git学习.assets/image-20210120210157739.png" alt="image-20210120210157739" style="zoom:80%;" /></p>
<ol>
<li>创建分支</li>
</ol>
<p><code>git branch 分支名</code></p>
<ol start="2">
<li>切换分支</li>
</ol>
<p><code>git checkout 分支名</code></p>
<pre class="prettyprint linenums:0"><code>G:\github\Git_test2&gt;git log --decorate --oneline --graph --all
* 2aac3cc (HEAD -&gt; master) change the README file again
| * 4d2155d (feature) change the README file
|/
* 95a0e76 commit all modified file plus readme
* 32556e1 pinyougou
</code></pre><ol start="3">
<li>分支的合并</li>
</ol>
<p><code>git merge 分支名</code></p>
<pre class="prettyprint linenums:0"><code>G:\github\Git_test2&gt;git log --decorate --oneline --graph --all
*   b112584 (HEAD -&gt; master) fix conflicts
|\
| * 4d2155d (feature) change the README file
* | 2aac3cc change the README file again
|/
* 95a0e76 commit all modified file plus readme
* 32556e1 pinyougou
</code></pre><ol start="4">
<li>删除分支</li>
</ol>
<p><code>git branch -d 分支名</code></p>
<h3 id="checkout"><code>checkout</code></h3>
<p>两种功能：</p>
<ol>
<li>从历史快照(或者暂存区域)中拷贝文件到工作目录</li>
<li>切换分支</li>
</ol>
<p><code>checkout</code>命令和<code>reset</code>命令都可以用于恢复指定快照的指定文件，并且都不会改变HEAD指针的指向</p>
<p>区别是reset命令只将指定文件恢复到暂存区域(--mixed)，而checkout命令同时覆盖暂存区域和工作目录</p>
<h3 id="-">本地仓库往远程仓库推送</h3>
<pre class="prettyprint linenums:0"><code>G:\github\Learning&gt;git status
On branch main
Your branch is up to date with &#39;origin/main&#39;.

Changes not staged for commit:
  (use &quot;git add/rm &lt;file&gt;...&quot; to update what will be committed)
  (use &quot;git restore &lt;file&gt;...&quot; to discard changes in working directory)
        deleted:    HTML+CSS/css/Cutterman_panel_3.5.0_201711141423.exe

Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
        HTML+CSS/css/Cutterman_panel_3.5.0_201711141423.zip

no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)

G:\github\Learning&gt;git add HTML+CSS/css/Cutterman_panel_3.5.0_201711141423.zip

G:\github\Learning&gt;git rm HTML+CSS/css/Cutterman_panel_3.5.0_201711141423.exe
rm &#39;HTML+CSS/css/Cutterman_panel_3.5.0_201711141423.exe&#39;

G:\github\Learning&gt;git status
On branch main
Your branch is up to date with &#39;origin/main&#39;.

Changes to be committed:
  (use &quot;git restore --staged &lt;file&gt;...&quot; to unstage)
        renamed:    HTML+CSS/css/Cutterman_panel_3.5.0_201711141423.exe -&gt; HTML+CSS/css/Cutterman_panel_3.5.0_201711141423.zip


G:\github\Learning&gt;git commit -m &quot;Replace the exe file&quot;
[main 8383346] Replace the exe file
 1 file changed, 0 insertions(+), 0 deletions(-)
 rename HTML+CSS/css/{Cutterman_panel_3.5.0_201711141423.exe =&gt; Cutterman_panel_3.5.0_201711141423.zip} (70%)

G:\github\Learning&gt;git push origin main
Enumerating objects: 8, done.
Counting objects: 100% (8/8), done.
Delta compression using up to 16 threads
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 1.19 MiB | 173.00 KiB/s, done.
Total 5 (delta 3), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/aghb123/Learning.git
   9932b75..8383346  main -&gt; main
</code></pre><p><strong>工作区的更改必须线提交到本地仓库，才能推送到远程仓库里</strong></p>
<h3 id="-git-">删除Git本地仓库</h3>
<p>删除Git本地仓库的根本原理是删除“Git本地仓库”里面的根目录下面的隐藏文件夹&quot;.git&quot;</p>
<p>方法一：自己手动删除掉Git本地仓库里面的根目录下面的隐藏文件夹&quot;.git&quot;</p>
<p>方法二：在本地仓库的目录下调用命令行删除根目录下的.git文件夹，输入</p>
<pre class="prettyprint linenums:0"><code>find . -name &quot;.git&quot; | xargs rm -Rf
</code></pre><p>检验是否成功删除了本地仓库：在Gitbash中进入仓库的目录中，如果目录末尾没有&quot;(master)&quot;，说明成功删除了本地仓库</p>
<pre class="prettyprint linenums:0"><code>WZ@DESKTOP-8SQ1L5C MINGW64 /g/github/demo (master)
$ find . -name &quot;.git&quot; | xargs rm -Rf

WZ@DESKTOP-8SQ1L5C MINGW64 /g/github/demo
$
</code></pre><h3 id="gitbash-">gitbash无法显示中文</h3>
<pre class="prettyprint linenums:0"><code>git config --global core.quotepath false
</code></pre><h3 id="-">无法推送的一种原因</h3>
<pre class="prettyprint linenums:0"><code>WZ@DESKTOP-8SQ1L5C MINGW64 /g/github/Learning (main)
$ git push origin main
To https://github.com/aghb123/Learning.git
 ! [rejected]        main -&gt; main (fetch first)
error: failed to push some refs to &#39;https://github.com/aghb123/Learning.git&#39;
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., &#39;git pull ...&#39;) before pushing again.
hint: See the &#39;Note about fast-forwards&#39; in &#39;git push --help&#39; for details.

WZ@DESKTOP-8SQ1L5C MINGW64 /g/github/Learning (main)
$ git pull
remote: Enumerating objects: 5, done.
remote: Counting objects: 100% (5/5), done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 3 (delta 1), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), 722 bytes | 3.00 KiB/s, done.
From https://github.com/aghb123/Learning
   5f26f0e..5bf2c62  main       -&gt; origin/main
Merge made by the &#39;recursive&#39; strategy.
 README.md | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

WZ@DESKTOP-8SQ1L5C MINGW64 /g/github/Learning (main)
$ git push origin main
Enumerating objects: 15, done.
Counting objects: 100% (13/13), done.
Delta compression using up to 16 threads
Compressing objects: 100% (7/7), done.
Writing objects: 100% (7/7), 1.96 KiB | 1.96 MiB/s, done.
Total 7 (delta 5), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (5/5), completed with 4 local objects.
To https://github.com/aghb123/Learning.git
   5bf2c62..0192cd2  main -&gt; main
</code></pre><p>本地仓库未与远程仓库同步(也就是远程仓库所作的改变本地仓库没有跟进)，此时推送会失败，<code>git pull</code>之后再<code>git push</code>即可，注意先后顺序即可</p>

            </article>
        </div>
    </div>
</body>

</html>
<script type="text/javascript" src="toc/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="toc/js/jquery.ztree.all-3.5.min.js"></script>
<script type="text/javascript" src="toc/js/ztree_toc.js"></script>
<script type="text/javascript" src="toc_conf.js"></script>
<!-- <script type="text/javascript" src="toc/js/run_prettify.js"></script> -->
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
<SCRIPT type="text/javascript">
    <!--
    $(document).ready(function() {
        var css_conf = eval(markdown_panel_style);
        $('#readme').css(css_conf)

        var conf = eval(jquery_ztree_toc_opts);
        setTimeout(function() {
            $('#tree').ztree_toc(conf);
        }, 500);

    });
    //-->
</SCRIPT>